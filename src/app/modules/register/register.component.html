<div class="login-container">
  <!-- LEFT SECTION -->
  <div class="left-section">
    <!-- BACKGROUND IMAGE -->
    <img class="bg-img" src="images/login.svg" alt="Tickets" />
  </div>
  <!-- RIGHT SECTION -->
  <div class="right-section">
    <!-- CHANGE LANGUAGE SWITCH -->
    <div class="change-language dropdown">
      <button
        #dropdownButton
        class="btn btn-lang dropdown-toggle p-0"
        type="button"
        id="dropdownMenuButton"
        data-bs-toggle="dropdown"
        aria-expanded="false"
        [class.active]="isDropdownOpen"
        (click)="toggleDropdown()"
      >
        <!-- FLAG IMAGE -->
        <img class="mx-2" [src]="currentLanguage + '.svg'" alt="th" />
        <!-- LANGUAGE TEXT -->
        {{ currentLanguage === "th" ? "ภาษาไทย" : "English" }}
        <!-- ARROW ICON -->
        <img
          class="arrow-icon"
          [src]="isDropdownOpen ? 'arrow-up.svg' : 'arrow-down.svg'"
          alt="Arrow Icon"
        />
      </button>
      <!-- LANGUAGE LIST -->
      <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <!-- THAI LANGUAGE -->
        <li>
          <a class="dropdown-item menu-lang" (click)="switchLanguage('th')">
            <img class="mx-2" src="th.svg" alt="th" />
            ภาษาไทย
          </a>
        </li>
        <!-- ENGLISH LANGUAGE -->
        <li>
          <a class="dropdown-item menu-lang" (click)="switchLanguage('en')">
            <img class="mx-2" src="en.svg" alt="en" />
            English
          </a>
        </li>
      </ul>
    </div>
    <!-- LOGO WEBSITE -->
    <div class="logo-section mt-5">
      <img class="logo-img" src="images/logo.svg" alt="Phuyaipu Logo" />
    </div>
    <!-- HEADER TITLE -->
    <div class="welcome-text mt-3">
      {{ "REGISTER.WELCOME" | translate }}
    </div>
    <!-- SUB HEADER TITLE -->
    <div class="hint-text mt-3">
      {{ "REGISTER.HINT" | translate }}
    </div>
    <!-- FORM SECTION -->
    <form class="login-form mt-3" [formGroup]="registerForm">
      <div class="row form-row">
        <div class="col-4">
          <!-- ชื่อจริง -->
          <label
            for="firstName"
            [class.label-error]="
              getForm('firstName')?.errors &&
              (getForm('firstName')?.touched || getForm('firstName')?.dirty)
            "
          >
            {{ "REGISTER.FIRSTNAME" | translate }}

            <span class="form-required">*</span>
          </label>
          <input
            class="form-control mt-1"
            type="text"
            id="firstName"
            formControlName="firstName"
            [placeholder]="'REGISTER.FIRSTNAME_PLACEHOLDER' | translate"
            [class.form-error]="
              getForm('firstName')?.errors &&
              (getForm('firstName')?.touched || getForm('firstName')?.dirty)
            "
          />
          <div
            class="text-error"
            *ngIf="
              getForm('firstName')?.errors &&
              (getForm('firstName')?.touched || getForm('firstName')?.dirty)
            "
          >
            {{ "REGISTER.FIRSTNAME_REQUIRED" | translate }}
          </div>
        </div>

        <div class="col-4">
          <!-- ชื่อกลาง -->
          <label for="middleName">
            {{ "REGISTER.MIDDLENAME" | translate }}
          </label>
          <input
            class="form-control mt-1"
            type="text"
            id="middleName"
            formControlName="middleName"
            [placeholder]="'REGISTER.MIDDLENAME_PLACEHOLDER' | translate"
          />
        </div>

        <div class="col-4">
          <!-- นามสกุล -->
          <label
            for="lastName"
            [class.label-error]="
              getForm('lastName')?.errors &&
              (getForm('lastName')?.touched || getForm('lastName')?.dirty)
            "
          >
            {{ "REGISTER.LASTNAME" | translate }}

            <span class="form-required">*</span>
          </label>
          <input
            class="form-control mt-1"
            type="text"
            id="lastName"
            formControlName="lastName"
            [placeholder]="'REGISTER.LASTNAME_PLACEHOLDER' | translate"
            [class.form-error]="
              getForm('lastName')?.errors &&
              (getForm('lastName')?.touched || getForm('lastName')?.dirty)
            "
          />
          <div
            class="text-error"
            *ngIf="
              getForm('lastName')?.errors &&
              (getForm('lastName')?.touched || getForm('lastName')?.dirty)
            "
          >
            {{ "REGISTER.LASTNAME_REQUIRED" | translate }}
          </div>
        </div>
      </div>
      <div class="row form-row">
        <div class="col-12">
          <div class="label-with-icon">
            <!-- ชื่อผู้ใช้งาน -->
            <label
              for="username"
              [class.label-error]="
                getForm('username')?.errors &&
                (getForm('username')?.touched || getForm('username')?.dirty)
              "
            >
              {{ "REGISTER.USERNAME" | translate }}

              <span class="form-required">*</span>
            </label>

            <div class="d-flex justify-content-end">
              <div class="tooltip-container">
                <img class="tooltip-icon" src="icons/info.svg" alt="info" />
                <div class="tooltip-box">
                  <strong>
                    {{ "REGISTER.USERNAME_GUIDELINES_TITLE" | translate }} 
                  </strong>
                  <br />
                  {{ "REGISTER.USERNAME_GUIDELINES_DESCRIPTION" | translate }} 
                  <strong>
                    <u>
                      {{ "REGISTER.USERNAME_MINIMUM_REQUIREMENT" | translate }} 
                    </u>
                  </strong>
                  {{ "REGISTER.USERNAME_RULES" | translate }} 
                </div>
              </div>
            </div>
          </div>

          <input
            class="form-control mt-1"
            type="text"
            id="username"
            formControlName="username"
            [placeholder]="'REGISTER.USERNAME_PLACEHOLDER' | translate"
            [class.form-error]="
              getForm('username')?.errors &&
              (getForm('username')?.touched || getForm('username')?.dirty)
            "
          />
          <div
            class="text-error"
            *ngIf="
              getForm('username')?.errors &&
              (getForm('username')?.touched || getForm('username')?.dirty)
            "
          >
            {{ "REGISTER.USERNAME_REQUIRED" | translate }}
          </div>
        </div>
      </div>
      <div class="row form-row">
        <div class="col-6">
          <!-- อีเมล -->
          <label
            for="email"
            [class.label-error]="
              getForm('email')?.errors &&
              (getForm('email')?.touched || getForm('email')?.dirty)
            "
          >
            {{ "REGISTER.EMAIL" | translate }}

            <span class="form-required">*</span>
          </label>
          <input
            class="form-control mt-1"
            type="text"
            id="email"
            formControlName="email"
            [placeholder]="'REGISTER.EMAIL_PLACEHOLDER' | translate"
            [class.form-error]="
              getForm('email')?.errors &&
              (getForm('email')?.touched || getForm('email')?.dirty)
            "
          />
          <div
            class="text-error"
            *ngIf="
              getForm('email')?.errors &&
              (getForm('email')?.touched || getForm('email')?.dirty)
            "
          >
            {{ "REGISTER.EMAIL_REQUIRED" | translate }}

            <span class="form-required">*</span>
          </div>
        </div>

        <div class="col-6">
          <!-- หมายเลขโทรศัพท์ -->
          <label
            for="phoneNumber"
            [class.label-error]="
              getForm('phoneNumber')?.errors &&
              (getForm('phoneNumber')?.touched || getForm('phoneNumber')?.dirty)
            "
          >
            {{ "REGISTER.PHONE_NO" | translate }}

            <span class="form-required">*</span>
          </label>
          <input
            class="form-control mt-1"
            type="text"
            id="phoneNumber"
            formControlName="phoneNumber"
            [placeholder]="'REGISTER.PHONE_NO_PLACEHOLDER' | translate"
            [class.form-error]="
              getForm('phoneNumber')?.errors &&
              (getForm('phoneNumber')?.touched || getForm('phoneNumber')?.dirty)
            "
          />
          <div
            class="text-error"
            *ngIf="
              getForm('phoneNumber')?.errors &&
              (getForm('phoneNumber')?.touched || getForm('phoneNumber')?.dirty)
            "
          >
            {{ "REGISTER.PHONE_NO_REQUIRED" | translate }}
          </div>
        </div>
      </div>
      <div class="row form-row">
        <div class="col-6">
          <div class="label-with-icon">
            <!-- รหัสผ่าน -->
            <label
              class="mt-3"
              for="password"
              [class.label-error]="
                getForm('password')?.errors &&
                (getForm('password')?.touched || getForm('password')?.dirty)
              "
            >
              {{ "REGISTER.PASSWORD" | translate }}

              <span class="form-required">*</span>
            </label>

            <div class="d-flex justify-content-end">
              <div class="tooltip-container">
                <img class="tooltip-icon" src="icons/info.svg" alt="info" />
                <div class="tooltip-box">
                  <strong> 
                    {{ "REGISTER.PASSWORD_GUIDELINES_TITLE" | translate }} 
                  </strong>
                  <br />
                  {{ "REGISTER.PASSWORD_GUIDELINES_DESCRIPTION" | translate }}
                  <strong>
                    <u>
                      {{ "REGISTER.PASSWORD_MINIMUM_REQUIREMENT" | translate }}
                    </u>
                  </strong>
                  <ul class="mb-0">
                    <li>{{ "REGISTER.PASSWORD_RULES.RULE_1" | translate }}</li>
                    <li>{{ "REGISTER.PASSWORD_RULES.RULE_2" | translate }}</li>
                    <li>{{ "REGISTER.PASSWORD_RULES.RULE_3" | translate }}</li>
                    <li>{{ "REGISTER.PASSWORD_RULES.RULE_4" | translate }}</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="password-container mt-1">
            <input
              class="form-control"
              [type]="isShowPassword ? 'text' : 'password'"
              id="password"
              formControlName="password"
              [placeholder]="'REGISTER.PASSWORD_PLACEHOLDER' | translate"
              [class.form-error]="
                getForm('password')?.errors &&
                (getForm('password')?.touched || getForm('password')?.dirty)
              "
            />
            <img
              *ngIf="isShowPassword"
              class="icon-eye"
              src="icons/eyes-close.svg"
              alt="eyes-close"
              (click)="toggleShowPassword()"
            />
            <img
              *ngIf="!isShowPassword"
              class="icon-eye"
              src="icons/eyes-open.svg"
              alt="eyes-close"
              (click)="toggleShowPassword()"
            />
          </div>
          <div
            class="text-error"
            *ngIf="
              getForm('password')?.errors &&
              (getForm('password')?.touched || getForm('password')?.dirty)
            "
          >
            <ng-container *ngIf="getFormErrors('password', 'required')">
              {{ "REGISTER.PASSWORD_REQUIRED" | translate }}
            </ng-container>

            <ng-container *ngIf="!checkSamePassword()">
              {{ "REGISTER.SAME_PASSWORD_VALIDATE" | translate }}
            </ng-container>
          </div>
        </div>

        <div class="col-6">
          <!-- ยืนยันรหัสผ่าน -->
          <label
            class="mt-3"
            for="confirmPassword"
            [class.label-error]="
              getForm('confirmPassword')?.errors &&
              (getForm('confirmPassword')?.touched ||
                getForm('confirmPassword')?.dirty)
            "
          >
            {{ "REGISTER.CONFIRM_PASSWORD" | translate }}

            <span class="form-required">*</span>
          </label>
          <div class="password-container mt-1">
            <input
              class="form-control"
              [type]="isShowConfirmPassword ? 'text' : 'confirmPassword'"
              id="confirmPassword"
              formControlName="confirmPassword"
              [placeholder]="
                'REGISTER.CONFIRM_PASSWORD_PLACEHOLDER' | translate
              "
              [class.form-error]="
                getForm('confirmPassword')?.errors &&
                (getForm('confirmPassword')?.touched ||
                  getForm('confirmPassword')?.dirty)
              "
            />
            <img
              *ngIf="isShowConfirmPassword"
              class="icon-eye"
              src="icons/eyes-close.svg"
              alt="eyes-close"
              (click)="toggleShowConfirmPassword()"
            />
            <img
              *ngIf="!isShowConfirmPassword"
              class="icon-eye"
              src="icons/eyes-open.svg"
              alt="eyes-close"
              (click)="toggleShowConfirmPassword()"
            />
          </div>
          <div
            class="text-error"
            *ngIf="
              getForm('confirmPassword')?.errors &&
              (getForm('confirmPassword')?.touched ||
                getForm('confirmPassword')?.dirty)
            "
          >
            <ng-container *ngIf="getFormErrors('confirmPassword', 'required')">
              {{ "REGISTER.CONFIRM_PASSWORD_REQUIRED" | translate }}
            </ng-container>

            <ng-container *ngIf="!checkSamePassword()">
              {{ "REGISTER.SAME_PASSWORD_VALIDATE" | translate }}
            </ng-container>
          </div>
        </div>
      </div>
      <!-- SUBMIT BUTTON -->
      <button
        type="submit"
        class="login-btn mt-3"
        [disabled]="registerForm.invalid"
        (click)="register()"
      >
        {{ "REGISTER.SAVE" | translate }}
      </button>
      <!--REGISTER LINK -->
      <p class="register-link text-center mt-4">
        {{ "REGISTER.LOGIN_LINK" | translate }}
        <a class="obrs-link" [routerLink]="'/login'">
          {{ "REGISTER.LOGIN_LINK_CLICK" | translate }}
        </a>
      </p>
    </form>
  </div>
</div>
